{% load static %}

<!-- Sidebar -->
<div class="sidebar" id="sidebar" style="
    position: fixed;
    /* Offset from top if you have a translator bar or fixed top bar (e.g., 60px) */
    top: 60px;  
    left: -200px;        /* Hidden initially */
    width: 200px;
    max-height: calc(100vh - 60px); /* Fits screen minus the offset */
    overflow: auto;      /* Allow scrolling if content is taller */
    z-index: 2000;       /* So it appears above other elements */
    display: none;       /* Completely hidden initially */
    flex-direction: column;
    align-items: center;
    background-color: var(--sidebar-background);
    animation: none;     /* Applied dynamically via JS */
    transition: left 0.3s ease, display 0.3s ease;
">

    <!-- Close Icon (âŒ) -->
    <div id="closeSidebar" style="
        position: absolute;
        top: 8px;   /* Slightly less top space for a smaller button */
        right: 8px;
        font-size: 18px; /* Smaller */
        cursor: pointer;
        color: #fff; 
        background-color: blue; /* Red */
        width: 32px;    /* Slightly smaller button */
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.3);
        z-index: 2001; 
        overflow: hidden;
        transition: transform 0.3s ease, background-color 0.3s ease;
    " 
    onmouseover="this.style.backgroundColor='blue'" 
    onmouseout="this.style.backgroundColor='blue'">
        âŒ
    </div>

    <!-- User Profile Picture -->
    <a href="{% url 'secretary_upload_profile_picture' %}" style="text-decoration: none;">
        {% if user.profile_picture %}
            <img
                src="{{ user.profile_picture.url }}"
                alt="User Profile Picture"
                style="
                    width: 40px;  /* Slightly smaller user pic */
                    height: 40px;
                    border-radius: 50%;
                    object-fit: cover;
                    border: 2px solid var(--sidebar-icon-border);
                    box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.2);
                    margin-top: 40px; /* Leaves room for the close icon at top */
                    margin-bottom: 15px; /* Slightly less space */
                "
            />
        {% else %}
            <img
                src="{% static 'images/user.png' %}"
                alt="Default User Icon"
                style="
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    object-fit: cover;
                    border: 2px solid var(--sidebar-icon-border);
                    box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.2);
                    margin-top: 40px;
                    margin-bottom: 15px;
                "
            />
        {% endif %}
    </a>

    <!-- Reusable .sidebar-button style -->
    <style>
        .sidebar-button {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 6px;            /* Slightly smaller gap than 8px */
            width: 80%;
            padding: 6px 10px;   /* Reduced from 8px 12px */
            margin-bottom: 8px;  /* Reduced from 10px */
            font-size: 12px;     /* Decreased from 14px */
            text-decoration: none;
            color: white;
            border-radius: 12px; /* Slightly smaller corner radius */
            box-shadow: 0px 3px 6px rgba(0,0,0,0.2);
            transition: background-color 0.3s ease, transform 0.3s ease;
        }
        .sidebar-button:hover {
            transform: scale(1.03);
        }
    </style>

    <!-- Home Button (ğŸ ) -->
    <a href="{% url 'secretary_dashboard' %}" class="sidebar-button" style="background-color: #007bff;"
       onmouseover="this.style.backgroundColor='#0056b3'" 
       onmouseout="this.style.backgroundColor='#007bff'">
        <span style="font-size: 16px;">ğŸ </span>
        <span>Home</span>
    </a>

    <!-- Details Button (â„¹ï¸) -->
    <a href="{% url 'parish_council_secretary_details' %}" class="sidebar-button" style="background-color: #28a745;"
       onmouseover="this.style.backgroundColor='#1c7430'" 
       onmouseout="this.style.backgroundColor='#28a745'">
        <span style="font-size: 16px;">â„¹ï¸</span>
        <span>Details</span>
    </a>

    <!-- Leaders Button (ğŸ‘¥) -->
    <a href="{% url 'secretary_leaders_home' %}" class="sidebar-button" style="background-color: #ffc107;"
       onmouseover="this.style.backgroundColor='#e0a800'" 
       onmouseout="this.style.backgroundColor='#ffc107'">
        <span style="font-size: 16px;">ğŸ‘¥</span>
        <span>Leaders</span>
    </a>

    <!-- Church Members Button (ğŸ§) -->
    <a href="{% url 'secretary_members_home' %}" class="sidebar-button" style="background-color: #fd7e14;"
       onmouseover="this.style.backgroundColor='#e86800'" 
       onmouseout="this.style.backgroundColor='#fd7e14'">
        <span style="font-size: 16px;">ğŸ§</span>
        <span>Members</span>
    </a>

    <!-- News Button (ğŸ“°) -->
    <a href="{% url 'secretary_news_home' %}" class="sidebar-button" style="background-color: #17a2b8;"
       onmouseover="this.style.backgroundColor='#117a8b'"
       onmouseout="this.style.backgroundColor='#17a2b8'">
        <span style="font-size: 16px;">ğŸ“°</span>
        <span>News</span>
    </a>

    <!-- Notifications Button (ğŸ””) -->
    <a href="{% url 'secretary_notifications_home' %}" class="sidebar-button" style="background-color: #6f42c1;"
       onmouseover="this.style.backgroundColor='#59369e'"
       onmouseout="this.style.backgroundColor='#6f42c1'">
        <span style="font-size: 16px;">ğŸ””</span>
        <span>Notifications</span>
    </a>

    <!-- Sacrament Button (ğŸ“–) -->
    <a href="{% url 'secretary_sacraments_home' %}" class="sidebar-button" style="background-color: #6610f2;"
       onmouseover="this.style.backgroundColor='#4b0b9b'"
       onmouseout="this.style.backgroundColor='#6610f2'">
        <span style="font-size: 16px;">ğŸ“–</span>
        <span>Sacrament</span>
    </a>

    <!-- Properties Button (ğŸ¡) -->
    <a href="{% url 'secretary_properties_home' %}" class="sidebar-button" style="background-color: #0dcaf0;"
       onmouseover="this.style.backgroundColor='#0bbac8'"
       onmouseout="this.style.backgroundColor='#0dcaf0'">
        <span style="font-size: 16px;">ğŸ¡</span>
        <span>Properties</span>
    </a>

    <!-- Settings Button (âš™ï¸) -->
    <a href="{% url 'secretary_settings_home' %}" class="sidebar-button" style="background-color: #dc3545;"
       onmouseover="this.style.backgroundColor='#a71d2a'"
       onmouseout="this.style.backgroundColor='#dc3545'">
        <span style="font-size: 16px;">âš™ï¸</span>
        <span>Settings</span>
    </a>
</div>

<script>
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebarToggle'); 
    const closeSidebar = document.getElementById('closeSidebar');
    let sidebarVisible = false;

    const toggleSidebar = () => {
        sidebarVisible = !sidebarVisible;
        if (sidebarVisible) {
            // Show sidebar
            sidebar.style.display = 'flex';
            sidebar.style.animation = 'slideIn 0.5s ease forwards';
            setTimeout(() => {
                sidebar.style.left = '0';
            }, 10);
        } else {
            // Hide sidebar
            sidebar.style.left = '-200px';
            sidebar.style.animation = 'slideOut 0.5s ease forwards';
            setTimeout(() => {
                sidebar.style.display = 'none';
            }, 300);
        }
    };

    sidebarToggle.addEventListener('click', toggleSidebar);
    closeSidebar.addEventListener('click', toggleSidebar);

    // Keyframe animations
    const style = document.createElement('style');
    style.innerHTML = `
        @keyframes slideIn {
            from { left: -200px; opacity: 0; }
            to { left: 0; opacity: 1; }
        }
        @keyframes slideOut {
            from { left: 0; opacity: 1; }
            to { left: -200px; opacity: 0; }
        }
    `;
    document.head.appendChild(style);
</script>
