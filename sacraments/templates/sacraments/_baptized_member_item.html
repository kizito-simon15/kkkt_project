{% load static %}

<li class="member-item" 
    data-baptism-date="{{ member.date_of_baptism|date:'Y-m-d' }}" 
    data-gender="{{ member.gender }}"
    data-status="{{ member.status }}"
    style="display: flex; align-items: center; padding: 10px; border-bottom: 1px solid #ddd; transition: background 0.3s ease; position: relative;">

    <!-- Member Passport -->
    {% if member.passport %}
        <img src="{{ member.passport.url }}" 
             alt="Member Passport" 
             style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover; margin-right: 10px;">
    {% else %}
        <img src="{% static 'images/user.png' %}" 
             alt="Default Avatar" 
             style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover; margin-right: 10px;">
    {% endif %}

    <!-- Member Info -->
    <div style="flex-grow: 1;">
        <div class="member-name" style="font-size: 16px; font-weight: bold; display: flex; align-items: center;">
            {{ member.full_name }}
            <span class="status-indicator" data-status="{{ member.status }}">
                {% if member.status == "Active" %}
                    <span style="color: #25D366; font-size: 18px; margin-left: 6px;" title="Active Member">✔️</span>
                {% else %}
                    <span style="color: red; font-size: 18px; margin-left: 6px;" title="Inactive Member">❌</span>
                {% endif %}
            </span>
        </div>
        <div style="font-size: 14px; color: gray;">📅 {{ member.date_of_baptism|date:"F d, Y" }}</div>
        <div style="font-size: 14px; color: gray;">⏳ {{ member.time_since_baptism }}</div>
    </div>

    <!-- Baptism Certificate -->
    <div style="display: flex; align-items: center; gap: 8px;">
        {% if member.baptism_certificate and member.baptism_certificate.url %}
            <!-- View Certificate -->
            <a href="{{ member.baptism_certificate.url }}" target="_blank"
               title="View Certificate" 
               style="font-size: 18px; color: #007bff; text-decoration: none;">
                📄 <!-- Unicode document icon -->
            </a>

            <!-- Download Certificate -->
            <a href="{{ member.baptism_certificate.url }}" 
               title="Download Certificate" 
               style="font-size: 18px; color: #28a745; text-decoration: none;" 
               download>
                ⬇️ <!-- Unicode download icon -->
            </a>
        {% else %}
            <p style="font-size: 12px; color: red; margin: 0;">⚠️ No Certificate</p>
        {% endif %}
    </div>

    <!-- Edit & Delete Icons -->
    <div style="display: flex; align-items: center; gap: 8px; margin-left: 10px;">
        <!-- Edit Member -->
        <a href="{% url 'update_baptized_member' member.id %}" 
           title="Edit Baptism Details"
           style="font-size: 18px; color: #ffc107; text-decoration: none;">
            ✏️ <!-- Unicode edit icon -->
        </a>

        <!-- Delete Member -->
        <a href="{% url 'delete_baptized_member' member.id %}" 
           title="Delete Baptized Member"
           style="font-size: 18px; color: red; text-decoration: none;"
           onclick="return confirm('⚠️ WARNING: This will reset all sacramental details (Baptism, Communion, Confirmation, Marriage) and remove certificates! Continue?');">
            🗑️ <!-- Trash Bin Icon -->
        </a>
    </div>

</li>
