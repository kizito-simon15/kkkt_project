{% extends 'base.html' %}
{% load static %}

{% block content %}

<div style="text-align: center; margin: 20px;">
    <!-- Header Row with Back Button, Title, and Menu Button -->
    <div style="
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        max-width: 100vw;
        padding: 0 10px;
        box-sizing: border-box;
        gap: 10px;
        margin-bottom: 20px;
    ">
        <!-- Back Button -->
        <button onclick="window.history.back()" style="
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(12px, 2.5vw, 14px);
            font-weight: bold;
            color: #007bff;
            padding: 8px 12px;
            border-radius: 20px;
            background: linear-gradient(130deg, #e3f2fd, #bbdefb);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border: none;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.2s ease;
            white-space: nowrap;
            flex-shrink: 0;
        " onmouseover="this.style.background='linear-gradient(130deg, #bbdefb, #bbdefb)'; this.style.transform='scale(1.05)'" 
          onmouseout="this.style.background='linear-gradient(130deg, #e3f2fd, #bbdefb)'; this.style.transform='scale(1)'">
            <span style="font-size: clamp(16px, 3vw, 20px);">â¬…ï¸</span>
        </button>

        <!-- Page Header -->
        <h2 style="
            font-size: clamp(18px, 4vw, 24px);
            font-weight: bold;
            color: #333;
            margin: 0;
            text-align: center;
            flex-grow: 1;
            white-space: normal;
        ">
            ğŸ’ Register Marriages
        </h2>

        <!-- Menu Button Partial -->
        {% include 'accounts/partials/menu_button_partial.html' %}
    </div>
</div>

<form method="POST" enctype="multipart/form-data" id="marriageForm" style="max-width: 600px; margin: auto;">
    {% csrf_token %}

    <div id="marriageContainer">
        <!-- First Marriage Block -->
        <div class="marriage-block">
            <h3 class="marriage-title" style="text-align: center; font-size: 18px; color: #007bff; margin-bottom: 15px;">ğŸ’ Create Marriage 1</h3>
            {% include 'sacraments/marriages/partials/_marriage_date_field.html' %}
            {% include 'sacraments/marriages/partials/_male_selection.html' %}
            {% include 'sacraments/marriages/partials/_female_selection.html' %}
            {% include 'sacraments/marriages/partials/_marriage_certificate_upload.html' %}
        </div>
    </div>

    <!-- Buttons Section -->
    <div style="text-align: center; margin-top: 20px; display: flex; justify-content: center; gap: 10px;">
        <!-- Add Another Marriage Button -->
        <button type="button" id="addMarriage"
                style="padding: 8px; font-size: 18px; background: #007bff; color: white; border: none; border-radius: 50%; cursor: pointer; width: 40px; height: 40px;"
                title="Add Another Marriage">
            â•
        </button>

        <!-- Remove Marriage Button -->
        <button type="button" id="removeMarriage"
                style="padding: 8px; font-size: 18px; background: #dc3545; color: white; border: none; border-radius: 50%; cursor: pointer; width: 40px; height: 40px; display: none;"
                title="Remove Last Marriage">
            â–
        </button>

        <!-- Save Marriage Button -->
        <button type="submit"
                style="padding: 8px; font-size: 18px; background: #28a745; color: white; border: none; border-radius: 50%; cursor: pointer; width: 40px; height: 40px;"
                title="Save Marriages">
            âœ…
        </button>
    </div>
</form>

<!-- JavaScript -->
{% include 'sacraments/marriages/partials/_marriage_scripts.html' %}

{% endblock %}