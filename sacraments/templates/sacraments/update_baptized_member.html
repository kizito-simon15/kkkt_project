{% extends 'base.html' %}
{% load static %}

{% block content %}

<div style="text-align: center; margin: 20px;">
    <!-- Header Row with Back Button, Title, and Menu Button -->
    <div style="
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        max-width: 100vw;
        padding: 0 10px;
        box-sizing: border-box;
        gap: 10px;
        margin-bottom: 20px;
    ">
        <!-- Back Button -->
        <button onclick="window.history.back()" style="
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(12px, 2.5vw, 14px);
            font-weight: bold;
            color: #007bff;
            padding: 8px 12px;
            border-radius: 20px;
            background: linear-gradient(130deg, #e3f2fd, #bbdefb);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border: none;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.2s ease;
            white-space: nowrap;
            flex-shrink: 0;
        " onmouseover="this.style.background='linear-gradient(130deg, #bbdefb, #bbdefb)'; this.style.transform='scale(1.05)'" 
          onmouseout="this.style.background='linear-gradient(130deg, #e3f2fd, #bbdefb)'; this.style.transform='scale(1)'">
            <span style="font-size: clamp(16px, 3vw, 20px);">⬅️</span>
        </button>

        <!-- Page Header -->
        <h2 style="
            font-size: clamp(18px, 4vw, 22px);
            font-weight: bold;
            color: #333;
            margin: 0;
            text-align: center;
            flex-grow: 1;
            white-space: normal;
        ">
            🛐 Update Baptized Member
        </h2>

        <!-- Menu Button Partial -->
        {% include 'accounts/partials/menu_button_partial.html' %}
    </div>

    <p style="font-size: 18px; color: #555;">👤 <strong>{{ member.full_name }}</strong></p>
</div>

{% if error %}
    <p style="color: red; text-align: center; font-size: 16px;">⚠️ {{ error }}</p>
{% endif %}

<!-- Update Form -->
<form method="POST" enctype="multipart/form-data" style="max-width: 90%; margin: auto;">
    {% csrf_token %}

    <!-- Baptism Date -->
    <div style="margin-bottom: 15px;">
        <label for="baptismDate" style="font-size: 16px; font-weight: bold; color: #333; display: block; text-align: left;">📅 Baptism Date:</label>
        <input type="date" id="baptismDate" name="baptism_date" value="{{ member.date_of_baptism|date:'Y-m-d' }}" required
               style="width: 100%; padding: 14px; border: 1px solid #ddd; border-radius: 25px; font-size: 16px; text-align: center; background: #f8f9fa; outline: none;">
    </div>

    <!-- Baptism Certificate Upload -->
    <div style="margin-bottom: 15px;">
        <label for="baptismCertificate" style="font-size: 16px; font-weight: bold; color: #333; display: block; text-align: left;">📜 Baptism Certificate:</label>
        <input type="file" id="baptismCertificate" name="baptism_certificate"
               style="width: 100%; padding: 14px; border: 1px solid #ddd; border-radius: 25px; font-size: 16px; background: #f8f9fa; outline: none;">
    </div>

    {% if member.baptism_certificate %}
        <!-- Current Certificate -->
        <p style="text-align: center; margin-top: 10px;">
            📂 <a href="{{ member.baptism_certificate.url }}" target="_blank" style="color: #007bff; text-decoration: none; font-size: 16px;">View Current Certificate</a>
        </p>

        <!-- Remove Certificate Checkbox -->
        <div style="text-align: center; margin-top: 15px;">
            <input type="checkbox" id="removeCertificate" name="remove_certificate" value="yes" 
                   style="width: 20px; height: 20px; cursor: pointer; accent-color: red;">
            <label for="removeCertificate" style="font-size: 16px; font-weight: bold; color: #333;">❌ Remove Current Certificate</label>
        </div>
    {% endif %}

    <!-- Submit Button -->
    <div style="text-align: center; margin-top: 30px;">
        <button type="submit" style="width: 100%; padding: 14px; font-size: 18px; font-weight: bold; background: #28a745; color: white; border: none; border-radius: 25px; cursor: pointer; outline: none;">
            ✅ Update Baptism
        </button>
    </div>
</form>

<!-- Back Button (Original Removed) -->
<!-- Removed original back button since it's now in the header row -->
<!-- <div style="text-align: center; margin-top: 20px;">
    <a href="{% url 'baptized_members' %}" style="text-decoration: none; font-size: 18px; color: #007bff; font-weight: bold;">
        ⬅️ Back to Baptized Members
    </a>
</div> -->

{% endblock %}