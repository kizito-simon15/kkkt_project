{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome | KKKT Mkwawa ⛪ Application</title>
  <style>
      /* General Reset */
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          background: linear-gradient(135deg, #6a11cb, #2575fc);
          font-family: 'Arial', sans-serif;
          color: white;
          overflow: hidden;
          padding: 20px;
          text-align: center;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: flex-start;  /* Align to the top */
          min-height: 100vh;
      }

      .content {
          display: flex;
          flex-direction: column;
          align-items: center;
          margin-top: 50px;  /* Add space from the top */
      }

      h1 {
          font-size: 3em;
          font-weight: bold;
          text-transform: uppercase;
          animation: fadeInScale 1.5s ease-in-out infinite alternate;
          line-height: 1.4;
          margin-bottom: 20px; /* Space between text and progress bar */
      }

      @keyframes fadeInScale {
          from {
              opacity: 0.7;
              transform: scale(0.95);
          }
          to {
              opacity: 1;
              transform: scale(1.05);
          }
      }

      .progress-container {
          width: 90%;
          max-width: 400px;
          height: 10px;
          background: rgba(255, 255, 255, 0.3);
          border-radius: 5px;
          overflow: hidden;
          margin-bottom: 20px; /* Space between progress bar and image */
      }

      .progress-bar {
          height: 100%;
          background: #4caf50;
          width: 0;
          border-radius: 5px;
          transition: width 0.1s linear;
      }

      /* Animated Image */
      .animated-image {
          width: 100%;
          max-width: 600px; /* Control max size */
          height: auto;
          animation: fadeIn 2s ease-in-out;
          display: none; /* We'll show this once it's fully loaded in JS */
      }

      @keyframes fadeIn {
          from {
              opacity: 0;
              transform: scale(0.9);
          }
          to {
              opacity: 1;
              transform: scale(1);
          }
      }

      /* Responsive Design */
      @media (max-width: 600px) {
          h1 {
              font-size: 2em;
          }

          .progress-container {
              height: 8px;
          }

          .animated-image {
              max-width: 90%; /* Adjust for small screens */
          }
      }

      @media (max-width: 360px) {
          h1 {
              font-size: 1.6em;
          }
      }
  </style>
</head>
<body>

  <div class="content">
      <h1>Welcome to<br> KKKT Mkwawa ⛪ Application</h1>

      <div class="progress-container">
          <div class="progress-bar" id="progressBar"></div>
      </div>

      <!-- We'll set this image's src via JavaScript after preloading -->
      <img id="churchImage" alt="Church" class="animated-image">
  </div>

  <script>
      // 1. Preload the image
      const preloadedImg = new Image();
      preloadedImg.src = "{% static 'images/church.png' %}";

      preloadedImg.onload = function() {
          // Once it's loaded, show the actual <img> by setting its src
          const churchImg = document.getElementById('churchImage');
          churchImg.src = preloadedImg.src;
          churchImg.style.display = 'block';  // reveal the image
      };

      // 2. Loading Bar Logic
      const progressBar = document.getElementById('progressBar');
      let progress = 0;
      const duration = 3000; // 3 seconds
      const interval = 30;   // Update every 30ms
      const increment = (interval / duration) * 100;

      const loader = setInterval(function() {
          progress += increment;
          progressBar.style.width = progress + '%';

          if (progress >= 100) {
              clearInterval(loader);
              window.location.href = "{% url 'login' %}";  // Redirect to login after 100%
          }
      }, interval);
  </script>

</body>
</html>
