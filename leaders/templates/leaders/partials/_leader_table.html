<div class="table-container" style="width: 100%; overflow-x: auto;">
    <table class="styled-table" id="leaderTable" style="width: 100%; border-collapse: collapse; margin-top: 15px;">
        <thead style="background-color: #007bff; color: white;">
            <tr>
                <th>🔢 S/N</th>
                <th>🔢 Leader ID</th>
                <th>✅ Status</th>
                <th>🖼️ Passport</th>
                <th>📛 Full Name</th>
                <th>⚥ Gender</th>
                <th>💼 Occupation</th>
                <th>🏘️ Cell (Outstation)</th>
                <th>⏳ Time in Service</th>
                <th>⚙️ Actions</th>
            </tr>
        </thead>
        <tbody id="leaderTableBody">
            {% for leader in leaders %}
                {% include 'leaders/partials/_leader_row.html' with leader=leader counter=forloop.counter %}
            {% endfor %}
        </tbody>
    </table>
</div>

<p id="noResultsMessage" class="no-results"
   style="color: red; font-size: 16px; text-align: center; margin-top: 15px; display: none;">
    ❌ No search results are found in the current filtering.
</p>

<style>
    .styled-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        font-size: 16px;
        text-align: left;
        min-width: 800px;
        overflow: hidden;
    }

    .styled-table thead {
        display: table-header-group;
    }

    .styled-table thead tr {
        background-color: #007bff;
        color: white;
        text-align: left;
        font-weight: bold;
    }

    .styled-table th, .styled-table td {
        padding: 12px 15px;
        border-bottom: 1px solid #ddd;
        white-space: nowrap;
    }

    .profile-pic {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #ccc;
    }

    @media (max-width: 768px) {
        .styled-table { font-size: 14px; min-width: 100%; }
        .styled-table th, .styled-table td { padding: 8px; }
    }

    @media (max-width: 480px) {
        .styled-table { font-size: 13px; }
        .styled-table th, .styled-table td { padding: 6px; }
        .profile-pic { width: 40px; height: 40px; }
    }
</style>

<script>
    function checkNoResults() {
        let tableBody = document.getElementById("leaderTableBody");
        let tableHead = document.querySelector(".styled-table thead");
        let noResultsMessage = document.getElementById("noResultsMessage");
        let rows = tableBody.querySelectorAll("tr");
        let visibleRows = Array.from(rows).filter(row => row.style.display !== "none");

        if (visibleRows.length === 0) {
            tableHead.style.display = "none";
            noResultsMessage.style.display = "block";
        } else {
            tableHead.style.display = "table-header-group";
            noResultsMessage.style.display = "none";
        }
    }

    document.addEventListener("DOMContentLoaded", checkNoResults);
    document.getElementById("searchName").addEventListener("input", checkNoResults);
    document.getElementById("genderFilter").addEventListener("change", checkNoResults);
    document.getElementById("occupationFilter").addEventListener("change", checkNoResults);
    document.getElementById("cellFilter").addEventListener("change", checkNoResults);
    document.getElementById("outstationFilter").addEventListener("change", checkNoResults);
</script>